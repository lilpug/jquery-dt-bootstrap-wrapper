/*!
    Title: Jquery Datatables Bootstrap Wrapper
    URL: https://github.com/lilpug/jquery-dt-bootstrap-wrapper
    Version: 1.1
    Author: David Whitehead
    Copyright (c) David Whitehead
    Copyright license: MIT
    Description: This library sits on top of the jquery datatables plugin and allows us to build the generic structures quickly           
	NOTE: This does use the bootstrap extension in jquery datatables itself            
    Requires: jquery 1.7+,jquery datatables 10.12,  bootstrap 3
*/
!function(e){function t(t,o){var n=t;if(null!=n&&void 0!=n){void 0!=e.data(e(document).get(0),n)&&null!=e.data(e(document).get(0),n)||e.data(e(document).get(0),n,{index:x(),castelement:n});var r=e.data(e(document).get(0),n),c=r.castelement;m(r,o,c);var l=u(o,r.index);return a(r,c,l)}}function a(t,a,n){if(!(void 0!=t&&e(a).length>0))return null;if(e.fn.DataTable.fnIsDataTable(a)&&b(a)||!e.fn.DataTable.fnIsDataTable(a)){e(a).show();var r=e(a).DataTable(n);return o(t,a,r,n),t.datatable=r,r}}function o(e,t,a,o){n(e,t,a,o),r(e,a,o),e.tickboxes&&1==e.tickboxes&&(c(e,a),l(e,a)),e.datesearcher&&1==e.datesearcher&&s(e,a,o)}function n(t,a,o,n){var r=[];e.each(n.columnDefs,function(e,t){r.push(t.targets[0])});var c="columnSearch-"+t.index,l=0;e(a+" .searchColumnTextDT").length>0&&e(a+" .searchColumnTextDT").remove(),e(a+" thead tr.search th").each(function(){if(-1==e.inArray(l,r)){var t=e(a+" thead tr.headings th").eq(e(this).index()).text(),n="";void 0!=o.state()&&null!=o.state()&&void 0!=o.state().columns&&null!=o.state().columns&&(n=o.state().columns[l].search.search),e(this).html('<input class="form-control searchColumnTextDT" type="text"  style="width:100%;" placeholder="'+t+'" id="'+c+l+'" value="'+n+'"/>'),e(this).attr("style","padding-left:4px; padding-right:4px;")}l++}),o.columns().eq(0).each(function(t){-1==e.inArray(t,r)&&(e(document).off("keyup","#"+c+t),e(document).on("keyup","#"+c+t,function(){o.column(t).search(this.value).draw()}))})}function r(t,a,o){var n="clearAllButton-"+t.index;e("#clearSearch-"+t.index).html("<input id='"+n+"' class='btn btn-primary' type='button' value='Clear All Filtering' style='float:left; margin-bottom:20px;' />"),e(document).off("click","#"+n),e(document).on("click","#"+n,function(){e("#dtwrapper-"+t.index+" input[type=text]").val(""),a.order(o.order),a.search("").columns().search("").draw(),t.datesearchone&&(t.datesearchone="",t.datesearchtwo="")})}function c(t,a){var o="clearAllCheckboxButton-"+t.index;e("#clearcheckboxes-"+t.index).html("<input id='"+o+"' class='btn btn-primary' type='button' value='Clear All Checkboxes' style='float:left; margin-bottom:20px;' />"),e(document).off("click","#"+o),e(document).on("click","#"+o,function(){a.$('input[type="checkbox"]').prop("checked",!1)})}function l(t,a){var o="CheckAllCheckboxButton-"+t.index;e("#tickcheckboxes-"+t.index).html("<input id='"+o+"' class='btn btn-primary' type='button' value='Tick All Checkboxes' style='float:left; margin-bottom:20px; margin-left:10px;' />"),e(document).off("click","#"+o),e(document).on("click","#"+o,function(){a.$('input[type="checkbox"]').prop("checked",!0)})}function s(t,a,o){var n="searchDateRange-"+t.index,r="<div class='dataTables_filter'><label>First Date: <input id='"+n+"One' class='form-control input-sm' type='text' value='"+t.datesearchone+"' style='margin-bottom:5px;' /></label></div>",c="<div class='dataTables_filter'><label>End Date: <input id='"+n+"Two' class='form-control input-sm' type='text' value='"+t.datesearchtwo+"' style='margin-bottom:5px;' /></label></div>";e("#dateSearch-"+t.index).html(r+c),t.datesearchcreate&&0!=t.datesearchcreate||(e.fn.dataTable.ext.search.push(function(a,o){try{var r=null;null!=e("#"+n+"One").val()&&e("#"+n+"One").val().trim()&&(r=parseInt(moment(e("#"+n+"One").val(),t.datesearchformat).format("YYYYMMDDHHmm")));var c=null;null!=e("#"+n+"Two").val()&&e("#"+n+"Two").val().trim()&&(c=parseInt(moment(e("#"+n+"Two").val(),t.datesearchformat).format("YYYYMMDDHHmm")))}catch(l){console.error("DataTables Wrapper Date Error: the search column date formats has either not been specified or does not match the actual columns.")}var s;try{e(o[t.datesearchoncolumn]).text()&&(s=e(o[t.datesearchoncolumn]).text())}catch(l){s=o[t.datesearchoncolumn]}try{var d=parseInt(moment(s,t.datecolumnsformat).format("YYYYMMDDHHmm"));if(null==r&&null==c||null==r&&c>=d||d>=r&&null==c||d>=r&&c>=d)return!0}catch(l){console.error("DataTables Wrapper Error Date: the column date format parameter has not been specified or does not match the actual column.")}return!1}),t.datesearchcreate=!0),""==t.datesearchone&&""==t.datesearchtwo||a.draw(),e(document).off("input change paste keyup focusout","#"+n+"One"),e(document).on("input change paste keyup focusout","#"+n+"One",function(){w(function(){o.stateSave&&(t.datesearchone=e("#"+n+"One").val()),a.draw()},1)}),e(document).off("input change paste keyup focusout","#"+n+"Two"),e(document).on("input change paste keyup focusout","#"+n+"Two",function(){w(function(){o.stateSave&&(t.datesearchtwo=e("#"+n+"Two").val()),a.draw()},1)})}function d(e,t){localStorage.setItem("DataTables_"+window.location.pathname,JSON.stringify(t))}function i(){var e=localStorage.getItem("DataTables_"+window.location.pathname);return JSON.parse(e)}function u(t,a){var o,n,r,c,l=e.extend({},g,t),s=[],d="",i=!1,u=0,m=!1;return e.each(l,function(t,a){t=t.toLowerCase(),"hiddencolumns"==t?e.each(a,function(e,t){s.push({targets:[t],visible:!0,bSortable:!1,searchable:!1})}):"datecolumns"==t?e.each(a,function(e,t){void 0!=l.datecolumnsformat?s.push({targets:[t],visible:!0,type:"date-search-"+l.datecolumnsformat.replace(/\s+/g,"-"),searchable:!0}):console.error("DataTables Wrapper Error Date Columns: You have specified date columns but not specified the 'datecolumnsformat' option.")}):"statesave"==t?i=a:"stateduration"==t?u=a:"order"==t?o=a:"lengthmenu"==t?n=a:"pagingtype"==t?r=a:"emptytable"==t?d=a:"dom"==t?c=a:"bsort"==t&&(m=a)}),l=h(s,r,d,n,o,m),l=f(l,i,u),l=p(l,a,c)}function m(t,a,o){if(void 0!=a&&null!=a){if(null!=a.allowSearchColumns&&1==a.allowSearchColumns&&(e(o+" thead tr").hasClass("headings")||e(o+" thead tr").attr("class","headings"),0==e(o+" thead tr.search").length&&(e(o+" thead").append('<tr class="search"></tr>'),e(o+" thead tr.headings th").each(function(t,a){e(o+" thead tr.search").append(e(a).clone().html(""))}))),void 0!=a.tickboxes&&1==a.tickboxes&&(t.tickboxes=!0),null!=a.datecolumns&&null!=a.datecolumnsformat&&(t.datecolumnsformat=a.datecolumnsformat,null!=e.fn.dataTable&&null!=e.fn.dataTable.ext&&e.fn.dataTable.ext.oSort&&null!=t.datecolumnsformat)){var n="date-search-"+t.datecolumnsformat.replace(/\s+/g,"-")+"-pre",r="date-search-"+t.datecolumnsformat.replace(/\s+/g,"-")+"-asc",c="date-search-"+t.datecolumnsformat.replace(/\s+/g,"-")+"-desc",l={};e.fn.dataTable.ext.oSort.hasOwnProperty(n)||(l[n]=function(a){var o,n=t.datecolumnsformat,r=!1;try{e(a).text()&&(o=e(a).text(),r=!0)}catch(c){}return r||(o=a),parseInt(moment(o,n).format("YYYYMMDDHHmm"))}),e.fn.dataTable.ext.oSort.hasOwnProperty(r)||(l[r]=function(e,t){return t>e?-1:e>t?1:0}),e.fn.dataTable.ext.oSort.hasOwnProperty(c)||(l[c]=function(e,t){return t>e?1:e>t?-1:0}),e.fn.dataTable.ext.oSort.hasOwnProperty(n)&&e.fn.dataTable.ext.oSort.hasOwnProperty(r)&&e.fn.dataTable.ext.oSort.hasOwnProperty(c)||e.extend(e.fn.dataTable.ext.oSort,l)}void 0!=a.datesearcher&&void 0!=a.datesearchoncolumn&&void 0!=a.datecolumnsformat&&void 0!=a.datesearchformat&&1==a.datesearcher&&(t.datesearcher=!0,t.datesearchoncolumn=a.datesearchoncolumn,t.datesearchformat=a.datesearchformat,t.datesearchcreate||(t.datesearchcreate=!1),(!t.datesearchone||void 0!=a.statesave&&0==a.statesave)&&(t.datesearchone=""),(!t.datesearchtwo||void 0!=a.statesave&&0==a.statesave)&&(t.datesearchtwo=""))}}function h(e,t,a,o,n,r){var c={orderCellsTop:!0,columnDefs:e,pagingType:t,bAutoWidth:!1,language:{emptyTable:a,info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"Showing 0 to 0 of 0 entries",infoFiltered:"(filtered from _MAX_ total entries)",infoPostFix:"",thousands:",",lengthMenu:"Show _MENU_ entries",loadingRecords:"Loading...",processing:"Processing...",search:"Search:",zeroRecords:"No matching records found",paginate:{first:"First",last:"Last",next:"Next",previous:"Previous"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},lengthMenu:o,order:n,bsort:r};return c}function f(t,a,o){if(a){var n={stateSave:a,stateDuration:o,stateSaveCallback:d,stateLoadCallback:i};t=e.extend({},n,t)}else{var n={stateSave:a};t=e.extend({},n,t)}return t}function p(t,a,o){if("default"==o){var n={dom:'<"#dtwrapper-'+a+'"<"row"<"col-sm-6"<"#clearSearch-'+a+'">><"col-sm-6"f>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};t=e.extend({},n,t)}else if("defaultBlank"==o){var n={dom:'<"#dtwrapper-'+a+'"<"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};t=e.extend({},n,t)}else if("defaultDateTick"==o){var n={dom:'<"#dtwrapper-'+a+'"<"row"<"col-sm-6"<"#clearSearch-'+a+'">><"col-sm-6 "<"#dateSearch-'+a+'">>><"row"<"col-sm-12"<"#clearcheckboxes-'+a+'"><"#tickcheckboxes-'+a+'">>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};t=e.extend({},n,t)}else if("defaultDate"==o){var n={dom:'<"#dtwrapper-'+a+'"<"row"<"col-sm-6"<"#clearSearch-'+a+'">><"col-sm-6"<"#dateSearch-'+a+'">>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};t=e.extend({},n,t)}else if("defaultTick"==o){var n={dom:'<"#dtwrapper-'+a+'"<"row"<"col-sm-6"<"#clearSearch-'+a+'">><"col-sm-6 searchbox"f>><"row"<"col-sm-12"<"#clearcheckboxes-'+a+'"><"#tickcheckboxes-'+a+'">>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};t=e.extend({},n,t)}else if("defaultTickBlank"==o){var n={dom:'<"#dtwrapper-'+a+'"<"row"<"col-sm-12"<"#clearcheckboxes-'+a+'"><"#tickcheckboxes-'+a+'">>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};t=e.extend({},n,t)}else{var n={dom:o.replace("@",a)};t=e.extend({},n,t)}return t}function b(t){if(e.fn.DataTable.fnIsDataTable(t)&&void 0!=e.data(e(document).get(0),t)){var a=e.data(e(document).get(0),t).datatable;return a.destroy(),!0}return!1}function v(t){return e.fn.DataTable.fnIsDataTable(t)&&void 0!=e.data(e(document).get(0),t)?e.data(e(document).get(0),t).datatable:null}function x(){var t=null;return e.each(e.data(e(document).get(0)),function(e,a){(null===t||a.index>t)&&(t=a.index)}),isNaN(t)||null==t?0:t+1}var g={hiddencolumns:[],emptytable:"no data has been found.",lengthmenu:[[10,25,50,-1],[10,25,50,"All"]],pagingtype:"full_numbers",order:[[0,"asc"]],bSort:!0,statesave:!1,stateduration:1200,dom:"default"};e.fn.datatablesWrapper=function(e,a){return"get"==e?v(this.selector):"destroy"==e?b(this.selector):"init"==e?t(this.selector,a):void 0};var w=function(){var e=0;return function(t,a){clearTimeout(e),e=setTimeout(t,a)}}()}(jQuery);