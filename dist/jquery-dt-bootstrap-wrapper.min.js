/*!
    Title: Jquery Datatables Bootstrap Wrapper 1.0
    URL: https://github.com/lilpug/jquery-dt-bootstrap-wrapper
    Version: 1.0
    Author: David Whitehead
    Copyright (c) David Whitehead
    Copyright license: MIT
    Description: This library sits on top of the jquery datatables plugin and allows us to build the generic structures quickly           
	NOTE: This does use the bootstrap extension in jquery datatables itself            
    Requires: jquery 1.7+,jquery datatables 10.12,  bootstrap 3
*/
!function(a){function d(b,c){var d=b;if(null!=d&&void 0!=d){void 0!=a.data(a(document).get(0),d)&&null!=a.data(a(document).get(0),d)||a.data(a(document).get(0),d,{index:v(),castelement:d});var f=a.data(a(document).get(0),d),g=f.castelement;o(f,c,g);var h=n(c,f.index);return e(f,g,h)}}function e(b,c,d){if(!(void 0!=b&&a(c).length>0))return null;if(a.fn.DataTable.fnIsDataTable(c)&&t(c)||!a.fn.DataTable.fnIsDataTable(c)){a(c).show();var e=a(c).DataTable(d);return f(b,c,e,d),b.datatable=e,e}}function f(a,b,c,d){g(a,b,c,d),h(a,c,d),a.tickboxes&&1==a.tickboxes&&(i(a,c),j(a,c)),a.datesearcher&&1==a.datesearcher&&k(a,c,d)}function g(b,c,d,e){var f=[];a.each(e.columnDefs,function(a,b){f.push(b.targets[0])});var g="columnSearch-"+b.index,h=0;a(c+" .searchColumnTextDT").length>0&&a(c+" .searchColumnTextDT").remove(),a(c+" thead tr.search th").each(function(){if(a.inArray(h,f)==-1){var b=a(c+" thead tr.headings th").eq(a(this).index()).text(),e="";void 0!=d.state()&&null!=d.state()&&void 0!=d.state().columns&&null!=d.state().columns&&(e=d.state().columns[h].search.search),a(this).html('<input class="form-control searchColumnTextDT" type="text"  style="width:100%;" placeholder="'+b+'" id="'+g+h+'" value="'+e+'"/>'),a(this).attr("style","padding-left:4px; padding-right:4px;")}h++}),d.columns().eq(0).each(function(b){a.inArray(b,f)==-1&&(a(document).off("keyup","#"+g+b),a(document).on("keyup","#"+g+b,function(){d.column(b).search(this.value).draw()}))})}function h(b,c,d){var e="clearAllButton-"+b.index;a("#clearSearch-"+b.index).html("<input id='"+e+"' class='btn btn-primary' type='button' value='Clear All Filtering' style='float:left; margin-bottom:20px;' />"),a(document).off("click","#"+e),a(document).on("click","#"+e,function(){a("#dtwrapper-"+b.index+" input[type=text]").val(""),c.order(d.order),c.search("").columns().search("").draw(),b.datesearchone&&(b.datesearchone="",b.datesearchtwo="")})}function i(b,c){var d="clearAllCheckboxButton-"+b.index;a("#clearcheckboxes-"+b.index).html("<input id='"+d+"' class='btn btn-primary' type='button' value='Clear All Checkboxes' style='float:left; margin-bottom:20px;' />"),a(document).off("click","#"+d),a(document).on("click","#"+d,function(){c.$('input[type="checkbox"]').prop("checked",!1)})}function j(b,c){var d="CheckAllCheckboxButton-"+b.index;a("#tickcheckboxes-"+b.index).html("<input id='"+d+"' class='btn btn-primary' type='button' value='Tick All Checkboxes' style='float:left; margin-bottom:20px; margin-left:10px;' />"),a(document).off("click","#"+d),a(document).on("click","#"+d,function(){c.$('input[type="checkbox"]').prop("checked",!0)})}function k(b,c,d){var e="searchDateRange-"+b.index,f="<div class='dataTables_filter'><label>First Date: <input id='"+e+"One' class='form-control input-sm' type='text' value='"+b.datesearchone+"' style='margin-bottom:5px;' /></label></div>",g="<div class='dataTables_filter'><label>End Date: <input id='"+e+"Two' class='form-control input-sm' type='text' value='"+b.datesearchtwo+"' style='margin-bottom:5px;' /></label></div>";a("#dateSearch-"+b.index).html(f+g),b.datesearchcreate&&0!=b.datesearchcreate||(a.fn.dataTable.ext.search.push(function(c,d,f){try{var g=null;null!=a("#"+e+"One").val()&&a("#"+e+"One").val().trim()&&(g=parseInt(moment(a("#"+e+"One").val(),b.datesearchformat).format("YYYYMMDDHHmm")));var h=null;null!=a("#"+e+"Two").val()&&a("#"+e+"Two").val().trim()&&(h=parseInt(moment(a("#"+e+"Two").val(),b.datesearchformat).format("YYYYMMDDHHmm")))}catch(a){console.error("DataTables Wrapper Date Error: the search column date formats has either not been specified or does not match the actual columns.")}var i;try{a(d[b.datesearchoncolumn]).text()&&(i=a(d[b.datesearchoncolumn]).text())}catch(a){i=d[b.datesearchoncolumn]}try{var j=parseInt(moment(i,b.datecolumnsformat).format("YYYYMMDDHHmm"));if(null==g&&null==h||null==g&&j<=h||g<=j&&null==h||g<=j&&j<=h)return!0}catch(a){console.error("DataTables Wrapper Error Date: the column date format parameter has not been specified or does not match the actual column.")}return!1}),b.datesearchcreate=!0),""==b.datesearchone&&""==b.datesearchtwo||c.draw(),a(document).off("input change paste keyup focusout","#"+e+"One"),a(document).on("input change paste keyup focusout","#"+e+"One",function(){s(function(){d.stateSave&&(b.datesearchone=a("#"+e+"One").val()),c.draw()},1)}),a(document).off("input change paste keyup focusout","#"+e+"Two"),a(document).on("input change paste keyup focusout","#"+e+"Two",function(){s(function(){d.stateSave&&(b.datesearchtwo=a("#"+e+"Two").val()),c.draw()},1)})}function l(a,b){localStorage.setItem("DataTables_"+window.location.pathname,JSON.stringify(b))}function m(a,b){var c=localStorage.getItem("DataTables_"+window.location.pathname);return JSON.parse(c)}function n(b,d){var j,k,l,m,e=a.extend({},c,b),f=[],g="",h=!1,i=0,n=!1;return a.each(e,function(b,c){b=b.toLowerCase(),"hiddencolumns"==b?a.each(c,function(a,b){f.push({targets:[b],visible:!0,bSortable:!1,searchable:!1})}):"datecolumns"==b?a.each(c,function(a,b){void 0!=e.datecolumnsformat?f.push({targets:[b],visible:!0,type:"date-search-"+e.datecolumnsformat.replace(/\s+/g,"-"),searchable:!0}):console.error("DataTables Wrapper Error Date Columns: You have specified date columns but not specified the 'datecolumnsformat' option.")}):"statesave"==b?h=c:"stateduration"==b?i=c:"order"==b?j=c:"lengthmenu"==b?k=c:"pagingtype"==b?l=c:"emptytable"==b?g=c:"dom"==b?m=c:"bsort"==b&&(n=c)}),e=p(f,l,g,k,j,n),e=q(e,h,i),e=r(e,d,m)}function o(b,c,d){if(void 0!=c&&null!=c){if(null!=c.allowSearchColumns&&1==c.allowSearchColumns&&(a(d+" thead tr").hasClass("headings")||a(d+" thead tr").attr("class","headings"),0==a(d+" thead tr.search").length&&(a(d+" thead").append('<tr class="search"></tr>'),a(d+" thead tr.headings th").each(function(b,c){a(d+" thead tr.search").append(a(c).clone().html(""))}))),void 0!=c.tickboxes&&1==c.tickboxes&&(b.tickboxes=!0),null!=c.datecolumns&&null!=c.datecolumnsformat&&(b.datecolumnsformat=c.datecolumnsformat,null!=a.fn.dataTable&&null!=a.fn.dataTable.ext&&a.fn.dataTable.ext.oSort&&null!=b.datecolumnsformat)){var e="date-search-"+b.datecolumnsformat.replace(/\s+/g,"-")+"-pre",f="date-search-"+b.datecolumnsformat.replace(/\s+/g,"-")+"-asc",g="date-search-"+b.datecolumnsformat.replace(/\s+/g,"-")+"-desc",h={};null==a.fn.dataTable.ext.oSort.functionNamePre&&(h[e]=function(c){var e,d=b.datecolumnsformat,f=!1;try{a(c).text()&&(e=a(c).text(),f=!0)}catch(a){}return f||(e=c),parseInt(moment(e,d).format("YYYYMMDDHHmm"))}),null==a.fn.dataTable.ext.oSort.functionNameAsc&&(h[f]=function(a,b){return a<b?-1:a>b?1:0}),null==a.fn.dataTable.ext.oSort.functionNameDesc&&(h[g]=function(a,b){return a<b?1:a>b?-1:0}),null!=a.fn.dataTable.ext.oSort.functionNamePre&&null!=a.fn.dataTable.ext.oSort.functionNameAsc&&null!=a.fn.dataTable.ext.oSort.functionNameDesc||a.extend(a.fn.dataTable.ext.oSort,h)}void 0!=c.datesearcher&&void 0!=c.datesearchoncolumn&&void 0!=c.datecolumnsformat&&void 0!=c.datesearchformat&&1==c.datesearcher&&(b.datesearcher=!0,b.datesearchoncolumn=c.datesearchoncolumn,b.datesearchformat=c.datesearchformat,b.datesearchcreate||(b.datesearchcreate=!1),(!b.datesearchone||void 0!=c.statesave&&0==c.statesave)&&(b.datesearchone=""),(!b.datesearchtwo||void 0!=c.statesave&&0==c.statesave)&&(b.datesearchtwo=""))}}function p(a,b,c,d,e,f){var g={orderCellsTop:!0,columnDefs:a,pagingType:b,bAutoWidth:!1,language:{emptyTable:c,info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"Showing 0 to 0 of 0 entries",infoFiltered:"(filtered from _MAX_ total entries)",infoPostFix:"",thousands:",",lengthMenu:"Show _MENU_ entries",loadingRecords:"Loading...",processing:"Processing...",search:"Search:",zeroRecords:"No matching records found",paginate:{first:"First",last:"Last",next:"Next",previous:"Previous"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},lengthMenu:d,order:e,bsort:f};return g}function q(b,c,d){if(c){var e={stateSave:c,stateDuration:d,stateSaveCallback:l,stateLoadCallback:m};b=a.extend({},e,b)}else{var e={stateSave:c};b=a.extend({},e,b)}return b}function r(b,c,d){if("default"==d){var e={dom:'<"#dtwrapper-'+c+'"<"row"<"col-sm-6"<"#clearSearch-'+c+'">><"col-sm-6"f>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};b=a.extend({},e,b)}else if("defaultBlank"==d){var e={dom:'<"#dtwrapper-'+c+'"<"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};b=a.extend({},e,b)}else if("defaultDateTick"==d){var e={dom:'<"#dtwrapper-'+c+'"<"row"<"col-sm-6"<"#clearSearch-'+c+'">><"col-sm-6 "<"#dateSearch-'+c+'">>><"row"<"col-sm-12"<"#clearcheckboxes-'+c+'"><"#tickcheckboxes-'+c+'">>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};b=a.extend({},e,b)}else if("defaultDate"==d){var e={dom:'<"#dtwrapper-'+c+'"<"row"<"col-sm-6"<"#clearSearch-'+c+'">><"col-sm-6"<"#dateSearch-'+c+'">>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};b=a.extend({},e,b)}else if("defaultTick"==d){var e={dom:'<"#dtwrapper-'+c+'"<"row"<"col-sm-6"<"#clearSearch-'+c+'">><"col-sm-6 searchbox"f>><"row"<"col-sm-12"<"#clearcheckboxes-'+c+'"><"#tickcheckboxes-'+c+'">>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};b=a.extend({},e,b)}else if("defaultTickBlank"==d){var e={dom:'<"#dtwrapper-'+c+'"<"row"<"col-sm-12"<"#clearcheckboxes-'+c+'"><"#tickcheckboxes-'+c+'">>><"row"<"col-sm-3"l><"col-sm-9"p>>rt<"bottom"<"row"<"col-sm-12"p>>><"clear">>'};b=a.extend({},e,b)}else{var e={dom:d.replace("@",c)};b=a.extend({},e,b)}return b}function t(b){if(a.fn.DataTable.fnIsDataTable(b)&&void 0!=a.data(a(document).get(0),b)){var c=a.data(a(document).get(0),b).datatable;return c.destroy(),!0}return!1}function u(b){return a.fn.DataTable.fnIsDataTable(b)&&void 0!=a.data(a(document).get(0),b)?a.data(a(document).get(0),b).datatable:null}function v(){var b=null;return a.each(a.data(a(document).get(0)),function(a,c){(null===b||c.index>b)&&(b=c.index)}),isNaN(b)||null==b?0:b+1}var c={hiddencolumns:[],emptytable:"no data has been found.",lengthmenu:[[10,25,50,-1],[10,25,50,"All"]],pagingtype:"full_numbers",order:[[0,"asc"]],bSort:!0,statesave:!1,stateduration:1200,dom:"default"};a.fn.datatablesWrapper=function(a,b){return"get"==a?u(this.selector):"destroy"==a?t(this.selector):"init"==a?d(this.selector,b):void 0};var s=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}()}(jQuery);